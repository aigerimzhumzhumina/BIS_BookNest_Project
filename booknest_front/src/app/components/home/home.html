<app-header></app-header>

<div class="home-container">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">{{ 'home.title' | translate }}</h1>
      <p class="hero-subtitle">
        {{ 'home.subtitle' | translate }}
      </p>
      <button class="btn-primary" (click)="navigateToRegister()">
        {{ 'home.startReading' | translate }}
      </button>
    </div>
    <div class="hero-image">
      <img src="assets/hero-books.jpg" alt="Books">
    </div>
  </section>

  <!-- Features Section -->
  <section class="features-section">
    <h2 class="section-title">{{ 'home.whyBookNest' | translate }}</h2>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">1</div>
        <h3>{{ 'home.feature1Title' | translate }}</h3>
        <p>{{ 'home.feature1Desc' | translate }}</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">2</div>
        <h3>{{ 'home.feature2Title' | translate }}</h3>
        <p>{{ 'home.feature2Desc' | translate }}</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">3</div>
        <h3>{{ 'home.feature3Title' | translate }}</h3>
        <p>{{ 'home.feature3Desc' | translate }}</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">4</div>
        <h3>{{ 'home.feature4Title' | translate }}</h3>
        <p>{{ 'home.feature4Desc' | translate }}</p>
      </div>
    </div>
  </section>

  <!-- Collections Section -->
  <section class="collections-section">
    <h2 class="section-title">{{ 'home.popularCollections' | translate }}</h2>
    <div class="collections-grid">
      @for (collection of collections; track collection.id) {
        <div class="collection-card" (click)="openCollection(collection)">
          <div class="collection-image">
            <img [src]="collection.image" [alt]="collection.title">
            <div class="collection-overlay">
              <span class="view-collection">{{ 'home.viewCollection' | translate }} →</span>
            </div>
          </div>
          <div class="collection-info">
            <h3>{{ collection.title }}</h3>
            <p>{{ collection.description }}</p>
          </div>
        </div>
      }
    </div>
  </section>

  <!-- Call to Action -->
  <section class="cta-section">
    <h2>{{ 'home.ctaTitle' | translate }}</h2>
    <p>{{ 'home.joinThousands' | translate }}</p>
    <button class="btn-primary" (click)="navigateToRegister()">
      {{ 'home.registerFree' | translate }}
    </button>
  </section>
</div>

<!-- Modal для отображения книг из коллекции -->
@if (selectedCollection) {
  <div class="modal-overlay" (click)="closeCollection()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="modal-close" (click)="closeCollection()">✕</button>
      <h2>{{ selectedCollection.title }}</h2>
      <p class="modal-description">{{ selectedCollection.description }}</p>
      <div class="books-grid">
        @for (book of selectedCollection.books; track book.id) {
          <div class="book-card" (click)="navigateToBook(book.id)">
            <img [src]="book.cover" [alt]="book.title">
            <div class="book-info">
              <h4>{{ book.title }}</h4>
              <p>{{ book.author }}</p>
              <div class="rating">
                <span class="star">★</span>
                <span>{{ book.rating }}</span>
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
}